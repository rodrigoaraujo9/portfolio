@import url('https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Instrument+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Manrope:wght@200..800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
  Palette notes:
  - Hue gravitating around 42–50 (warm, parchment/ivory direction).
  - Lower chroma + higher L* for backgrounds; softened “ink” for text.
  - Borders/rings stay warm and quiet, avoiding stark contrast.
*/

@layer base {
  :root {
    /* Warm ivory canvas + softened ink */
    --background: 48 28% 97%;
    --foreground: 45 15% 14%;

    --card: 48 28% 97%;
    --card-foreground: 45 15% 14%;

    --popover: 48 28% 97%;
    --popover-foreground: 45 15% 14%;

    /* Primary stays warm and calm (not pitch black) */
    --primary: 45 20% 22%;
    --primary-foreground: 45 60% 96%;

    /* Secondary/muted/accent: warm, desaturated, airy */
    --secondary: 48 25% 94%;
    --secondary-foreground: 45 20% 22%;

    --muted: 48 20% 92%;
    --muted-foreground: 48 12% 38%;

    --accent: 42 30% 88%;
    --accent-foreground: 45 20% 22%;

    /* Keep destructive clear but not neon */
    --destructive: 7 65% 52%;
    --destructive-foreground: 45 60% 96%;

    /* Soft edges & inputs */
    --border: 48 14% 85%;
    --input: 48 14% 85%;
    --ring: 42 30% 40%;

    --radius: 0.5rem;

    /* Custom font families */
    --font-heading: 'Bricolage Grotesque', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-body: 'Instrument Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-alt: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', Consolas, monospace;
  }

  .dark {
    /* Dark theme keeps warmth; not pure black */
    --background: 48 10% 6%;
    --foreground: 45 20% 92%;

    --card: 48 10% 6%;
    --card-foreground: 45 20% 92%;

    --popover: 48 10% 6%;
    --popover-foreground: 45 20% 92%;

    --primary: 45 20% 92%;
    --primary-foreground: 45 15% 15%;

    --secondary: 48 8% 12%;
    --secondary-foreground: 45 20% 92%;

    --muted: 48 8% 14%;
    --muted-foreground: 48 10% 62%;

    --accent: 48 8% 12%;
    --accent-foreground: 45 20% 92%;

    --destructive: 7 65% 35%;
    --destructive-foreground: 45 20% 92%;

    --border: 48 8% 14%;
    --input: 48 8% 14%;
    --ring: 42 30% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-body);
    font-feature-settings: 'rlig' 1, 'calt' 1;
  }

  /* Override Tailwind's default fonts */
  .font-sans {
    font-family: var(--font-body) !important;
  }

  .font-mono {
    font-family: var(--font-mono) !important;
  }

  /* Heading font styling */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    font-weight: 600;
    letter-spacing: -0.02em;
  }

  h1 {
    font-weight: 700;
    letter-spacing: -0.04em;
  }

  h2 {
    font-weight: 650;
    letter-spacing: -0.03em;
  }

  /* Alternative font class for special sections */
  .font-tech {
    font-family: var(--font-alt);
    font-weight: 500;
    letter-spacing: -0.01em;
  }

  /* Code and monospace styling */
  code, kbd, samp, pre {
    font-family: var(--font-mono);
    font-feature-settings: 'liga' 1, 'calt' 1;
  }
}

h3 code {
  @apply !text-lg md:!text-xl;
}

pre {
  @apply !px-0 rounded-lg overflow-x-auto py-4;
}

pre [data-line] {
  @apply px-4;
}

code {
  @apply text-sm md:text-base !leading-loose;
  font-family: var(--font-mono);
}

pre > code {
  counter-reset: line;
}

code[data-theme*=" "],
code[data-theme*=" "] span {
  color: var(--shiki-light);
  background-color: var(--shiki-light-bg);
}

@media (prefers-color-scheme: dark) {
  code[data-theme*=" "],
  code[data-theme*=" "] span {
    color: var(--shiki-dark);
    background-color: var(--shiki-dark-bg);
  }
}

code[data-line-numbers] {
  counter-reset: line;
}

code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  @apply inline-block w-4 mr-4 text-right text-gray-500;
}

code {
  counter-reset: line;
}

code > [data-line]::before {
  counter-increment: line;
  content: counter(line);

  /* Other styling */
  display: inline-block;
  width: 1rem;
  margin-right: 2rem;
  text-align: right;
  color: gray;
}

code[data-line-numbers-max-digits="2"] > [data-line]::before {
  width: 2rem;
}

code[data-line-numbers-max-digits="3"] > [data-line]::before {
  width: 3rem;
}

/* Utility classes for different font styles */
.font-heading { font-family: var(--font-heading); }
.font-body { font-family: var(--font-body); }
.font-alt { font-family: var(--font-alt); }
.font-mono { font-family: var(--font-mono); }
::view-transition-old(root), ::view-transition-new(root) {
    animation: none;
    mix-blend-mode: normal;
}